{% extends "base.html" %}
{% block content %}
<h2>Variance Report</h2>
<form method="post" class="row g-3 mb-4">
  <div class="col-md-3"><input type="date" class="form-control" name="date" value="{{ date }}"></div>
  <div class="col-md-3">
    <select class="form-select" name="device_id">
      {% for d in devices %}
      <option value="{{ d }}" {% if d == device_id %}selected{% endif %}>{{ d }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2"><button class="btn btn-primary w-100">Show</button></div>
</form>

{% if rows %}
<table class="table table-striped">
  <thead>
    <tr><th>Ingredient</th><th>Opening</th><th>Replenishment</th><th>Consumed</th><th>Expected Closing</th><th>Physical Closing</th><th>Variance</th></tr>
  </thead>
  <tbody>
    {% for r in rows %}
    <tr>
      <td>{{ r.ingredient_name }}</td>
      <td>{{ r.opening }}</td>
      <td>{{ r.replenishment }}</td>
      <td>{{ r.consumed }}</td>
      <td>{{ r.expected_closing }}</td>
      <td>{{ r.physical_closing }}</td>
      <td>{{ r.variance }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
